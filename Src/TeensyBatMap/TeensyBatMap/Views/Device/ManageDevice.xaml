<device:ManageDevicePageBase
    x:Name="pageRoot"
    x:Class="TeensyBatMap.Views.Device.ManageDevicePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:winRtLib="using:WinRtLib"
	xmlns:controls="using:TeensyBatMap.Controls"
	xmlns:sf="using:Syncfusion.UI.Xaml.Charts"
	xmlns:device="using:TeensyBatMap.Views.Device"
	xmlns:serial="using:Windows.Devices.Enumeration"
	xmlns:converters="using:WinRTXamlToolkit.Converters"
	xmlns:valueConverters="using:TeensyBatMap.Common.ValueConverters"
	mc:Ignorable="d" d:DataContext="{d:DesignInstance Type=device:ManageDevicePageModel, IsDesignTimeCreatable=True }">

	<Page.Resources>
		<valueConverters:StringFormatter x:Key="sf" />
		<converters:BooleanToVisibilityConverter x:Key="BoolToVis" IsInversed="False" />
	</Page.Resources>

	<winRtLib:PageGrid Titel="{Binding Titel}" IsBusy="{Binding IsBusy}">
        <Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition />
				<ColumnDefinition />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition />
			</Grid.RowDefinitions>
			<TextBlock Grid.Row="0" Grid.Column="0" Style="{ThemeResource LabelStyle}"  Visibility="{Binding IsConnected, Converter={StaticResource BoolToVis}}">Node Id:</TextBlock>
			<TextBlock Grid.Row="0" Grid.Column="1" Style="{ThemeResource ValueStyle}" Text="{Binding DeviceInfo.NodeId, Converter={StaticResource sf}, ConverterParameter=\{0:00\}}"  Visibility="{Binding IsConnected, Converter={StaticResource BoolToVis}}"/>

			<TextBlock Grid.Row="1" Grid.Column="0" Style="{ThemeResource LabelStyle}" Visibility="{Binding IsConnected, Converter={StaticResource BoolToVis}}">Geräte Zeit (UTC):</TextBlock>
			<StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="1" Visibility="{Binding IsConnected, Converter={StaticResource BoolToVis}}">
				<TextBlock Style="{ThemeResource ValueStyle}" Text="{Binding DeviceInfo.CurrentDate, Converter={StaticResource sf}, ConverterParameter=\{0:dd.MM.yyyy HH:mm:ss\}}" />
				<TextBlock Style="{ThemeResource ValueStyle}" Text="{Binding DeviceInfo.TimeDeltaSeconds, Converter={StaticResource sf}, ConverterParameter=Drift: \{0:0.00\} s}" />
			</StackPanel>

			<TextBlock Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4" Text="{Binding Data}" TextWrapping="WrapWholeWords" Visibility="{Binding ShowLog, Converter={StaticResource BoolToVis}}" />
		</Grid>
    </winRtLib:PageGrid>
    
    <Page.BottomAppBar>
		<CommandBar IsOpen="True" IsSticky="True">
			<AppBarButton Label="Log" Command="{Binding ShowLogCommand}">
				<AppBarButton.Icon>
					<PathIcon HorizontalAlignment="Center" VerticalAlignment="Center" Data="M7.78249788284302,9.15878295898438L8.49288368225098,9.3384370803833 8.99602031707764,9.80900287628174 9.39437961578369,11.2125015258789 8.97258186340332,12.691969871521 7.77500247955322,13.3112716674805 6.5837459564209,12.6929140090942 6.16312074661255,11.2650299072266 6.56828212738037,9.79588508605957 7.78249788284302,9.15878295898438z M2.51811981201172,8.70876312255859L2.51811981201172,13.7612533569336 5.32938051223755,13.7612533569336 5.32938051223755,13.2137680053711 3.17062401771545,13.2137680053711 3.17062401771545,8.70876312255859 2.51811981201172,8.70876312255859z M13.3693895339966,8.65627288818359L12.2283554077148,8.85198593139648 11.3689861297607,9.39557075500488 10.825909614563,10.2216958999634 10.6337556838989,11.2650299072266 10.8228168487549,12.3434591293335 11.3381204605103,13.1462860107422 12.1814956665039,13.6572170257568 13.2268724441528,13.8137817382813 14.1492900848389,13.7144041061401 14.7787675857544,13.536262512207 14.7787675857544,11.1075210571289 13.1143770217896,11.1075210571289 13.1143770217896,11.6324996948242 14.1418657302856,11.6324996948242 14.1418657302856,13.1387710571289 13.2718858718872,13.2737731933594 11.85618019104,12.7350997924805 11.3231287002563,11.2350082397461 11.8777379989624,9.74431037902832 13.3543977737427,9.20375823974609 14.4712648391724,9.42062377929688 14.6287355422974,8.88877868652344 13.3693895339966,8.65627288818359z M7.81250047683716,8.62625122070313L6.87663269042969,8.81528663635254 6.13336133956909,9.35149192810059 5.46625185012817,11.2800216674805 6.10148477554321,13.1354141235352 6.81967830657959,13.6582508087158 7.73750352859497,13.8437652587891 9.39382648468018,13.1654119491577 9.8979377746582,12.3321418762207 10.0831232070923,11.1825180053711 9.46507740020752,9.34212207794189 8.7492094039917,8.8148193359375 7.81250047683716,8.62625122070313z M6.76563310623169,1.24626159667969L5.88438320159912,1.61189079284668 5.5187611579895,2.49313354492188 5.5187611579895,7.20066070556641 16.3462657928467,7.20066070556641 16.9199256896973,7.43823528289795 17.1574993133545,8.01189422607422 17.1574993133545,14.2462539672852 16.9199256896973,14.8193788528442 16.3462657928467,15.0568771362305 5.5187611579895,15.0568771362305 5.5187611579895,17.5062561035156 5.88438320159912,18.3875122070313 6.76563310623169,18.7531280517578 16.8425197601318,18.7531280517578 17.723762512207,18.3875122070313 18.089391708374,17.5062561035156 18.089391708374,5.94875335693359 13.9468965530396,5.94875335693359 13.5066566467285,5.76555728912354 13.3237657546997,5.32501220703125 13.3237657546997,1.24691009521484 13.3237657546997,1.24626159667969 6.76563310623169,1.24626159667969z M6.76563310623169,0L13.9325151443481,0 19.3368740081787,5.40500640869141 19.3368740081787,17.5062561035156 19.1405773162842,18.4759845733643 18.6055526733398,19.2687568664551 17.8126010894775,19.8037128448486 16.8425197601318,20 6.76563310623169,20 5.79563570022583,19.8037128448486 5.00288772583008,19.2687568664551 4.46807146072388,18.4759845733643 4.27187013626099,17.5062561035156 4.27187013626099,15.0568771362305 0.810623168945313,15.0568771362305 0.237498238682747,14.8193788528442 0,14.2462539672852 0,8.01189422607422 0.237498238682747,7.43823528289795 0.810623168945313,7.20066070556641 4.27187013626099,7.20066070556641 4.27187013626099,2.49313354492188 4.46807146072388,1.52350008487701 5.00288772583008,0.730938911437988 5.79563570022583,0.196191668510437 6.76563310623169,0z" />
				</AppBarButton.Icon>
			</AppBarButton>
			<AppBarButton Label="Zeit setzen" Command="{Binding UpdateTimeCommand}" >
				<AppBarButton.Icon>
					<PathIcon HorizontalAlignment="Center" VerticalAlignment="Center" Data="M10.6774911880493,3.33312010765076L11.9274940490723,3.33312010765076 11.9274940490723,8.12499904632568 15.0700016021729,8.12499904632568 15.0700016021729,9.375 10.6774911880493,9.375 10.6774911880493,3.33312010765076z M11.25,0L14.6527347564697,0.688674449920654 17.4343757629395,2.56563186645508 19.3113288879395,5.34727334976196 20,8.75 19.3113288879395,12.1527271270752 17.4343757629395,14.9343681335449 14.6527347564697,16.8113250732422 11.25,17.5 11.25,16.25 14.1665925979614,15.6596975326538 16.5508613586426,14.0508604049683 18.1596984863281,11.6665925979614 18.75,8.75 18.1596984863281,5.83340692520142 16.5508613586426,3.44913959503174 14.1665925979614,1.8403023481369 11.25,1.25 8.33340740203857,1.8403023481369 5.94913959503174,3.44913959503174 4.34030246734619,5.83340692520142 3.75,8.75 6.45811986923218,8.75 3.22062253952026,11.9999923706055 0,8.75 2.5,8.75 3.18867182731628,5.34727334976196 5.06562471389771,2.56563186645508 7.84726524353027,0.688674449920654 11.25,0z" />
				</AppBarButton.Icon>
			</AppBarButton>
			<AppBarButton Label="Aktualisieren" Icon="Sync" Command="{Binding RefreshCommand}" />
        </CommandBar>
    </Page.BottomAppBar>

</device:ManageDevicePageBase>



